/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Scala library project to get you started.
 * For more details take a look at the Scala plugin chapter in the Gradle
 * User Manual available at https://docs.gradle.org/5.3/userguide/scala_plugin.html
 */

plugins {
    // Apply the scala plugin to add support for Scala
    id 'idea'
    id 'scala'
    id 'com.github.maiflai.scalatest' version '0.25'
    id 'org.scoverage' version '3.0.0'
}

idea {
    module {
        downloadJavadoc = false
        downloadSources = true
    }
}

repositories {
    mavenCentral()
}

sourceSets.main.scala.srcDirs = ['src/main/scala']
sourceSets.test.scala.srcDirs = ['src/test/scala']

dependencies {
    compile group: 'org.scala-lang', name: 'scala-library', version: scalaFullVersion
    compile group: 'org.scala-lang', name: 'scala-compiler', version: scalaFullVersion
    compileOnly group: 'mysql', name: 'mysql-connector-java', version: mysqlVersion
    compileOnly group: 'org.apache.spark', name: 'spark-core_'+scalaBinaryVersion, version: sparkVersion
    compileOnly group: 'org.apache.spark', name: 'spark-hive_'+scalaBinaryVersion, version: sparkVersion
    
    testCompile group: 'org.scalatest', name: 'scalatest_'+scalaBinaryVersion, version: scalaTestVersion
    testCompile group: 'mysql', name: 'mysql-connector-java', version: mysqlVersion
    testCompile group: 'com.holdenkarau', name: 'spark-testing-base_'+scalaBinaryVersion, version: sparkTestVersion

    testRuntime group: 'org.pegdown', name: 'pegdown', version: pegdownVersion
}

test {
    maxParallelForks = 1

    minHeapSize = "512m"
    maxHeapSize = "2048m"

    jvmArgs = ['-XX:+CMSClassUnloadingEnabled']

    failFast = true
}

scoverage {
    minimumRate = 0.80
}
